<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weekly Pages</title>
  <style>
    body {
      font-family: Georgia, serif;
      margin: 2em;
      line-height: 1.6;
      background-color: #f9f9f9;
      color: #333;
    }

    header {
      background: #fff;
      padding: 1em 2em;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ccc;
      position: relative;
    }

    h1 {
      margin: 0;
      font-size: 2em;
      color: #2c3e50;
    }

    nav {
      display: flex;
      gap: 1em;
    }

    nav a {
      color: #2c3e50;
      background: transparent;
      padding: 0.3em 0.6em;
      text-decoration: none;
      border-radius: 3px;
      font-size: 1em;
      transition: background-color 0.3s ease, color 0.3s ease;
      border: none;
      font-weight: 500;
    }

    nav a:hover,
    nav a:focus {
      background-color: #2c3e50;
      color: white;
      outline: none;
      cursor: pointer;
    }

    .dropdown {
      display: none;
      position: relative;
    }

    .dropdown-button {
      background: transparent;
      border: none;
      font-size: 1.2em;
      cursor: pointer;
      color: #2c3e50;
      padding: 0.3em 0.6em;
      border-radius: 3px;
      font-weight: 500;
    }

    .dropdown-button:hover,
    .dropdown-button:focus {
      background-color: #2c3e50;
      color: white;
      outline: none;
    }

    .dropdown-menu {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background: white;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-top: 0.3em;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      min-width: 120px;
      z-index: 10;
    }

    .dropdown-menu a {
      display: block;
      padding: 0.5em 1em;
      color: #2c3e50;
      text-decoration: none;
      font-weight: 400;
      border-bottom: 1px solid #eee;
    }

    .dropdown-menu a:last-child {
      border-bottom: none;
    }

    .dropdown-menu a:hover,
    .dropdown-menu a:focus {
      background-color: #2c3e50;
      color: white;
      outline: none;
    }

    .dropdown.open .dropdown-menu {
      display: block;
    }

    @media (max-width: 600px) {
      nav {
        display: none;
      }
      .dropdown {
        display: block;
      }
    }

    main {
      padding: 2em;
    }

    footer {
      background: #f1f1f1;
      text-align: center;
      padding: 1em;
      margin-top: 2em;
    }

    h2 {
      color: #2c3e50;
    }

    img {
      display: block;
      margin: 1.5em auto;
      max-width: 90%;
      height: auto;
    }

    .reduced-size {
      max-width: 63%; /* 70% of 90% */
    }

    .smaller-size {
      max-width: 42%; /* 2/3 of reduced-size */
    }

    @media (max-width: 600px) {
      .reduced-size {
        max-width: 90%;
      }
      .smaller-size {
        max-width: 70%;
      }
    }

    .figure {
      text-align: center;
      margin-bottom: 2em;
    }

    .figure-caption {
      font-style: italic;
      color: #555;
      margin-top: 0.5em;
    }

    code {
      background-color: #eee;
      padding: 0.2em 0.4em;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Hannah's Weekly Notes</h1>

    <nav>
      <a href="index.html">Week 1-2</a>
      <a href="week2.html">Week 2-3</a>
    </nav>

    <div class="dropdown" aria-haspopup="true" aria-expanded="false">
      <button class="dropdown-button" aria-label="Open navigation menu">☰</button>
      <div class="dropdown-menu" role="menu" aria-label="Navigation menu">
        <a href="index.html" role="menuitem">Week 1-2</a>
        <a href="week2.html" role="menuitem">Week 2-3</a>
      </div>
    </div>
  </header>

  <main>

    <h2>Adding Speed</h2>
    <p>
      The gps data is stored as sequential <code>[x, y, time]</code> entries. Distance between consecutive points is calculated 
      using the Haversine formula. Speed is derived from the distance and time difference.
    </p>
    <p>
      Each point is assigned the speed required to reach it from the previous one. 
      We then compute a weighted average speed for each pixel using Gaussian intensity weights.
    </p>

    <div class="figure">
      <img src="graphs/equation.png" alt="Speed Example" class="reduced-size">
    </div>
    <div class="figure">
      <img src="graphs/equation2.png" alt="Speed Example" class="reduced-size">
      <div class="figure-caption">Example: Two points with speeds 100 and 50 respectively.</div>
    </div>

    <div class="figure">
      <img src="graphs/speed.png" alt="Average Speed" class="reduced-size smaller-size">
      <div class="figure-caption">Full average speed plot (white = null).</div>
    </div>

    <h3>Speed vs Path</h3>
    <p>Just out of interest I wanted to see if we could see a relationship between speed and path intensity or rank?</p>

    <div class="figure">
      <img src="graphs/correlation.png" alt="Speed vs Intensity">
      <div class="figure-caption">Speed vs Path Intensity</div>
    </div>

    <p>Nothing striking.</p>

    <h2>Calculating Directional Speed</h2>
    <p>
      To investigate slope effects, we measure speed in four directions (N, S, E, W). 
      This is done by computing vector components between GPS points.
      These are stored in four separate directional speed maps.
    </p>

    <h3>North vs South / East vs West</h3>
    <p>
      We checked if it’s significantly faster in certain directions due to terrain (e.g., steep hills).
      No major differences observed.
    </p>

    <div class="figure">
      <img src="graphs/directions.png" alt="North vs South">
      <div class="figure-caption">North vs South Speed Comparison</div>
    </div>

  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const dropdown = document.querySelector('.dropdown');
      const button = dropdown.querySelector('.dropdown-button');

      button.addEventListener('click', function (e) {
        e.stopPropagation();
        dropdown.classList.toggle('open');
        const expanded = dropdown.classList.contains('open');
        button.setAttribute('aria-expanded', expanded);
      });

      document.addEventListener('click', function (e) {
        if (!dropdown.contains(e.target)) {
          dropdown.classList.remove('open');
          button.setAttribute('aria-expanded', false);
        }
      });
    });
  </script>

</body>
</html>
